[build]
  command = "pnpm build:netlify"
  publish = "dist"
  edge_functions = "netlify/edge-functions"

[context.production]
  command = "pnpm build"

[build.environment]
  NODE_VERSION = "20"
  # Vite exposes VITE_* vars to browser bundles by design.
  # Supabase URL + anon key are public client values (RLS must protect data).
  # DATABASE_URL and DIRECT_DATABASE_URL are for Umami backend deployments and must stay server-side.
  # Google Maps browser keys start with "AIza" and are expected in client bundles (referrer-restricted key).
  SECRETS_SCAN_OMIT_KEYS = "VITE_GOOGLE_MAPS_API_KEY,VITE_GEMINI_API_KEY,GEMINI_API_KEY,OPENAI_API_KEY,ANTHROPIC_API_KEY,OPENROUTER_API_KEY,TF_ADMIN_API_KEY,VITE_SUPABASE_URL,VITE_SUPABASE_ANON_KEY,SUPABASE_SERVICE_ROLE_KEY,VITE_UMAMI_SCRIPT_URL,VITE_UMAMI_WEBSITE_ID,DATABASE_URL,DIRECT_DATABASE_URL,SUPABASE_AUTH_EXTERNAL_GOOGLE_CLIENT_SECRET,AIza"
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"
  SECRETS_SCAN_SMART_DETECTION_OMIT_VALUES = "AIza"

[[plugins]]
  package = "./netlify/plugins/site-og-build-cache"

[dev]
  targetPort = 5173

[[edge_functions]]
  path = "/api/health"
  function = "health"

[[edge_functions]]
  path = "/api/ai/generate"
  function = "ai-generate"

[[edge_functions]]
  path = "/api/internal/ai/benchmark"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/ai/benchmark/export"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/ai/benchmark/cleanup"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/ai/benchmark/rating"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/ai/benchmark/cancel"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/ai/benchmark/telemetry"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/ai/benchmark/preferences"
  function = "ai-benchmark"

[[edge_functions]]
  path = "/api/internal/admin/iam"
  function = "admin-iam"

[[edge_functions]]
  path = "/api/trip-map-preview"
  function = "trip-map-preview"

[[edge_functions]]
  path = "/api/trip-share-resolve"
  function = "trip-share-resolve"

[[edge_functions]]
  path = "/api/og/trip"
  function = "trip-og-image"

[[edge_functions]]
  path = "/api/og/playground"
  function = "trip-og-playground"

[[edge_functions]]
  path = "/api/og/site"
  function = "site-og-image"

[[edge_functions]]
  path = "/"
  function = "site-og-meta"

[[edge_functions]]
  path = "/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/example/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/es/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/de/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fr/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pt/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ru/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/it/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/pl/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ko/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/fa/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/features"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/inspirations"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/inspirations/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/updates"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/blog"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/blog/*"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/pricing"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/faq"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/share-unavailable"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/login"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/contact"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/imprint"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/privacy"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/terms"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/cookies"
  function = "site-og-meta"

[[edge_functions]]
  path = "/ur/create-trip"
  function = "site-og-meta"

[[edge_functions]]
  path = "/s/*"
  function = "trip-og-meta"

[[edge_functions]]
  path = "/trip/*"
  function = "trip-og-meta"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/flags/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/images/blog/*"
  [headers.values]
    Cache-Control = "public, max-age=2592000, s-maxage=31536000, stale-while-revalidate=2592000"

[[headers]]
  for = "/images/og/site/generated/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/fonts/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
